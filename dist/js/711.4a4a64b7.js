"use strict";(self["webpackChunkpract_calls"]=self["webpackChunkpract_calls"]||[]).push([[711],{8632:function(e,t,o){o.d(t,{Z:function(){return d}});var l=o(3396),s=o(7139);const a=["disabled"];function n(e,t,o,n,i,u){return(0,l.wg)(),(0,l.iD)("button",{disabled:o.disabled},(0,s.zw)(o.text),9,a)}var i={name:"Text_button",props:{text:{required:!0},disabled:{default:!1,type:Boolean}}},u=o(89);const r=(0,u.Z)(i,[["render",n],["__scopeId","data-v-669e8118"]]);var d=r},4970:function(e,t,o){o.d(t,{Z:function(){return c}});var l=o(3396),s=o(7139);const a={class:"input"},n=["readonly","type","value"];function i(e,t,o,i,u,r){return(0,l.wg)(),(0,l.iD)("div",a,[(0,l._)("label",null,[o.label?((0,l.wg)(),(0,l.iD)("span",{key:0,class:(0,s.C_)({focused:u.focus||o.modelValue})},(0,s.zw)(o.label),3)):(0,l.kq)("",!0),(0,l._)("input",{readonly:o.readonly,onFocus:t[0]||(t[0]=(...e)=>r.focused&&r.focused(...e)),onBlur:t[1]||(t[1]=(...e)=>r.blurred&&r.blurred(...e)),type:o.type,onInput:t[2]||(t[2]=t=>e.$emit("update:modelValue",t.target.value)),value:o.modelValue},null,40,n)])])}var u={name:"Text_input",data(){return{focus:!1}},props:{label:String,type:{default:"text",type:String},readonly:{type:Boolean,default:!1},modelValue:String},methods:{focused(){this.focus=!0},blurred(){this.focus=!1}}},r=o(89);const d=(0,r.Z)(u,[["render",i],["__scopeId","data-v-65f46f99"]]);var c=d},711:function(e,t,o){o.r(t),o.d(t,{default:function(){return p}});var l=o(3396);const s={id:"auth"},a={key:0,class:"form"},n={key:1,class:"form"};function i(e,t,o,i,u,r){const d=(0,l.up)("Text_input"),c=(0,l.up)("Text_button");return(0,l.wg)(),(0,l.iD)("div",s,[u.login_form_active?((0,l.wg)(),(0,l.iD)("div",a,[(0,l.Wm)(d,{label:"Логин",modelValue:u.login,"onUpdate:modelValue":t[0]||(t[0]=e=>u.login=e)},null,8,["modelValue"]),(0,l.Wm)(d,{label:"Пароль",modelValue:u.password,"onUpdate:modelValue":t[1]||(t[1]=e=>u.password=e)},null,8,["modelValue"]),(0,l.Wm)(c,{text:"Вход",onClick:r.do_login},null,8,["onClick"]),(0,l._)("p",{onClick:t[2]||(t[2]=(...e)=>r.switch_to_register&&r.switch_to_register(...e))},"У меня нет учётной записи")])):(0,l.kq)("",!0),u.login_form_active?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",n,[(0,l.Wm)(d,{label:"Логин",modelValue:u.login,"onUpdate:modelValue":t[3]||(t[3]=e=>u.login=e)},null,8,["modelValue"]),(0,l.Wm)(d,{label:"Имя",modelValue:u.name,"onUpdate:modelValue":t[4]||(t[4]=e=>u.name=e)},null,8,["modelValue"]),(0,l.Wm)(d,{label:"Пароль",modelValue:u.password,"onUpdate:modelValue":t[5]||(t[5]=e=>u.password=e)},null,8,["modelValue"]),(0,l.Wm)(c,{text:"Регистрация",onClick:r.do_register},null,8,["onClick"]),(0,l._)("p",{onClick:t[6]||(t[6]=(...e)=>r.switch_to_login&&r.switch_to_login(...e))},"У меня есть учётная запись")]))])}o(7658);var u=o(4970),r=o(8632),d=o(3274),c={name:"Auth_view",data(){return{login:"",password:"",name:"",login_form_active:!0}},components:{Text_input:u.Z,Text_button:r.Z},methods:{switch_to_register(){this.login_form_active=!1,this.login="",this.password=""},switch_to_login(){this.login="",this.password="",this.name="",this.login_form_active=!0},do_login(){(0,d.Z)("/login",{login:this.login,password:this.password}).then((e=>{"success"===e.status?(this.$store.commit("set_user_id",e.detail),this.$router.push("/")):this.$store.commit("set_popup_message",e.detail)}))},do_register(){(0,d.Z)("/register",{login:this.login,password:this.password,name:this.name}).then((e=>{"success"===e.status?(this.$store.commit("set_popup_message","Вы успешно зарегистрировались"),this.switch_to_login()):this.$store.commit("set_popup_message",e.detail)}))}},mounted(){(0,d.Z)("/get_user_id").then((e=>{"success"===e.status&&(this.$store.commit("set_user_id",e.detail),this.$router.push("/"))}))}},m=o(89);const _=(0,m.Z)(c,[["render",i],["__scopeId","data-v-28997a4a"]]);var p=_}}]);
//# sourceMappingURL=711.4a4a64b7.js.map